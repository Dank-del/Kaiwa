{% extends "chat/base.html" %} {% block main_content %}
<h1>Manage Room: {{ room.name }}</h1>
<form id="manage-room-form">
  <label for="action">Action:</label>
  <select id="action" name="action">
    <option value="add_member">Add Member</option>
    <option value="remove_member">Remove Member</option>
    <option value="edit_title">Edit Title</option>
    <option value="create_invite_link">Create Invite Link</option>
  </select>
  <input type="hidden" id="room_id" name="room_id" value="{{ room.id }}" />
  {% if action == 'add_member' %}
  <label for="user_id">User ID:</label>
  <input type="text" id="user_id" name="user_id" />
  {% endif %} {% if action == 'edit_title' %}
  <label for="title">New Title:</label>
  <input type="text" id="title" name="title" />
  {% endif %}
  <button type="submit">Submit</button>
</form>

<script>
  document
    .getElementById("manage-room-form")
    .addEventListener("submit", function (event) {
      event.preventDefault();
      const formData = new FormData(this);
      fetch("/manage_room/", {
        method: "POST",
        body: formData,
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.status === "success") {
            alert("Operation successful!");
            // Optionally, refresh the page or redirect to another page
          } else {
            alert("An error occurred.");
          }
        });
    });
</script>
{%endblock%}
